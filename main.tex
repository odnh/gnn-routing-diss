\documentclass[a4paper,12pt,twoside,openright]{report}

% information defines
\def\authorname{Oliver D.\ N.\ Hope\xspace}
\def\authorcollege{Jesus College\xspace}
\def\authoremail{oliver.hope@cst.cam.ac.uk}
\def\dissertationtitle{Generalisable data-driven routing using Deep RL with GNNs}
\def\wordcount{\texcount{main}}


\usepackage{epsfig,graphicx,verbatim,parskip,tabularx,setspace,xspace}
\usepackage[UKenglish]{babel}  % correct hyphenation and dates
\usepackage[backend=biber]{biblatex}
\usepackage{csquotes}
\usepackage{amsmath}
\usepackage{unicode-math}  % loads fontspec too
\defaultfontfeatures{Ligatures=TeX}
\setmainfont[Numbers={Lining,Proportional},RawFeature={+ss06}]{EB Garamond}
\setmonofont{inconsolata}
\setsansfont{Linux Biolinum O}
\setmathfont{Garamond-Math}
\usepackage[md]{titlesec}  % section/chapter headings aren't bold
\usepackage[titles]{tocloft}  % for modifying toc, titles makes titlesec happy
\usepackage{bm}  % bold maths stuff
\usepackage{algorithm}
\usepackage{algcompatible}
\usepackage{algpseudocode}
\usepackage{acro}  % for acronyms
\usepackage[hidelinks=true]{hyperref}

% remove this when done
\usepackage{todonotes}

% fix comment alignment in algorithm blocks
\renewcommand{\Comment}[2][.525\linewidth]{%
  \leavevmode\hfill\makebox[#1][l]{$\triangleright$~#2}}

% word count for declaration page
\usepackage{shellesc}
\newcommand{\texcount}[1]{
  \ShellEscape{texcount -merge -sum -q -brief -total -0 #1.tex > #1.wc }
  \input{#1.wc}
}

% remove bolding and add small caps to chapters in toc
\renewcommand\cftchapfont{\mdseries\scshape}
\renewcommand\cftchappagefont{\mdseries\scshape}

% fancy chapter styling https://tex.stackexchange.com/a/177236/36845
\newcommand*\HUGE{\Huge}
\newcommand*\chapnamefont{\normalfont\LARGE\MakeUppercase}
\newcommand*\chapnumfont{\normalfont\HUGE}
\newcommand*\chaptitlefont{\normalfont\HUGE}

\newlength\beforechapskip
\newlength\midchapskip
\setlength\midchapskip{\paperwidth}
\addtolength\midchapskip{-\textwidth}
\addtolength\midchapskip{-\oddsidemargin}
\addtolength\midchapskip{-1in}
\setlength\beforechapskip{18mm}

\titleformat{\chapter}[display]
  {\normalfont\filleft}
  {{\chapnamefont\chaptertitlename}%
    \makebox[0pt][l]{\hspace{.8em}%
      \resizebox{!}{\beforechapskip}{\chapnumfont\thechapter}%
      \hspace{.8em}%
      \rule{\midchapskip}{\beforechapskip}%
    }%
  }%
  {25pt}
  {\chaptitlefont}
\titlespacing*{\chapter}
  {0pt}{40pt}{40pt}

% add bibliography
\addbibresource{refs.bib}
% add acronyms
\input{sections/acronyms}

%% START OF DOCUMENT
\begin{document}

%% FRONTMATTER (TITLE PAGE, DECLARATION, ABSTRACT, ETC)
\pagestyle{empty}
\singlespacing
\input{sections/titlepage}
\onehalfspacing
\input{sections/declaration}
\singlespacing
\input{sections/abstract}

\pagenumbering{roman}
\setcounter{page}{0}
\pagestyle{plain}
\tableofcontents
\listoffigures

\onehalfspacing

%% START OF MAIN TEXT
\input{sections/introduction}

\input{sections/background}

\input{sections/problem}

\input{sections/learning}

\input{sections/evaluation}

\input{sections/conclusions}

\appendix
\singlespacing

\cleardoublepage
\phantomsection
\addcontentsline{toc}{chapter}{List of Abbreviations}  % put acronyms page in toc
\printacronyms[name=List of Abbreviations]

\cleardoublepage
\phantomsection
\addcontentsline{toc}{chapter}{Bibliography}  % put bibliography in toc
\printbibliography

\end{document}
